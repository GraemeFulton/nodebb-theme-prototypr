{"version":3,"file":"pulling-reveal.min.js","sources":["../src/util.ts","../src/pulling.ts","../src/touch.ts","../src/reveal.ts"],"sourcesContent":["export function assertArg(condition: any, message: string) {\n  if (!condition) {\n    throw TypeError(`Invalid arguments: ${message}`);\n  }\n}\n\nexport function polyfill() {\n  Element.prototype.matches = Element.prototype.matches ||\n    // @ts-ignore: Property does not exist\n    Element.prototype.matchesSelector ||\n    Element.prototype.webkitMatchesSelector ||\n    // @ts-ignore: Property does not exist\n    Element.prototype.mozMatchesSelector ||\n    Element.prototype.msMatchesSelector ||\n    // @ts-ignore: Property does not exist\n    Element.prototype.oMatchesSelector;\n\n  Object.entries = /* Object.entries || */ ((obj: any) => {\n    return Object.keys(obj).map(key => [key, obj[key]] as [string, any]);\n  });\n\n  Object.values = /* Object.values || */ ((obj: any) => {\n    return Object.keys(obj).map(key => obj[key]);\n  });\n\n  Object.assign = Object.assign || ((first: any, ...objects: any[]) => {\n    for (const obj of objects) {\n      for (const [key, val] of Object.entries(obj)) {\n        first[key] = val;\n      }\n    }\n\n    return first;\n  });\n\n  Array.prototype.includes = function includes(value) {\n    return this.indexOf(value) !== -1;\n  };\n}\n","import { assertArg } from './util';\n\nconst timingFunctions: timingFunctions[] = [\n  'linear', 'ease', 'ease-in', 'ease-out',\n  'ease-in-out', 'step-start', 'step-end',\n];\n\nexport default abstract class Pulling {\n  static modes: {\n    [key: string]: new (options: Options) => Pulling;\n  } = {};\n\n  static create(options: Options) {\n    const mode = options.mode || Object.keys(Pulling.modes)[0] || 'drawer';\n    if (!Pulling.modes[mode]) {\n      const modes = Object.keys(Pulling.modes).map(x => `\"${x}\"`).join(', ');\n      throw TypeError(`${'`mode`'} must be one of ${modes}`);\n    }\n\n    return new Pulling.modes[mode](options);\n  }\n\n  protected menu: HTMLElement;\n  protected panel: HTMLElement;\n  protected side: sides;\n  protected mode: modes;\n  protected margin: number;\n  protected timing: number;\n  protected timingFunction: timingFunctions;\n  protected width: number;\n  protected sensitivity: number;\n  protected slope: number;\n  \n  protected styles: Styles = {\n    base: {\n      menu: {},\n      panel: {},\n    },\n    open: {\n      menu: {},\n      panel: {},\n    },\n    closed: {\n      menu: {},\n      panel: {},\n    },\n  };\n\n  protected constructor(options: Options) {\n    if (!Object.values(Pulling.modes).some(x => this instanceof x)) {\n      throw TypeError(\n        'Calling this constructor is not allowed. ' +\n        'Use `Pulling.create` instead',\n      );\n    }\n\n    const {\n      menu,\n      panel,\n      side,\n      mode,\n      margin,\n      timing,\n      timingFunction,\n      width,\n      sensitivity,\n      slope,\n      touch,\n    } = options;\n\n    this.menu = menu;\n    this.panel = panel;\n    this.side = side || 'left';\n    this.mode = mode || 'drawer';\n    this.margin = margin || 25,\n    this.timing = timing || 200;\n    this.timingFunction = timingFunction || 'ease';\n    this.width = width || 256;\n    this.sensitivity = sensitivity || 0.25;\n    this.slope = slope || 0.5;\n\n    assertArg(\n      this.menu instanceof Element, \n      '`menu` must be of type `Element`',\n    );\n    assertArg(\n      this.panel instanceof Element, \n      '`panel` must be of type `Element`',\n    );\n    assertArg(\n      this.side === 'left' || this.side === 'right', \n      '`side` must be equal to \"left\" or \"right\"',\n    );\n    assertArg(\n      typeof this.margin === 'number',\n      '`margin` must be of type \"number\"',\n    );\n    assertArg(\n      typeof this.timing === 'number',\n      '`timing` must be of type \"number\"',\n    );\n    assertArg(\n      timingFunctions.includes(this.timingFunction),\n      `${'`timingFunction`'} must be one of ${timingFunctions.map(x => `\"${x}\"`).join(', ')}`,\n    );\n    assertArg(\n      typeof this.width === 'number',\n      '`width` must be of type \"number\"',\n    );\n    assertArg(\n      typeof this.sensitivity === 'number',\n      '`sensitivity` must be of type \"number\"',\n    );\n    assertArg(\n      typeof this.slope === 'number',\n      '`slope` must be of type \"number\"',\n    );\n  }\n\n  protected handlers: {\n    beforeclose: Function[],\n    closed: Function[],\n    beforeopen: Function[],\n    opened: Function[],\n    touchstart: Function[],\n    touchmove: Function[],\n    touchend: Function[],\n  } = {\n    beforeclose: [],\n    closed: [],\n    beforeopen: [],\n    opened: [],\n    touchstart: [],\n    touchmove: [],\n    touchend: [],\n  };\n\n  /** Trigger event listeners for the event */\n  protected emit(eventName: eventNames, e?: Event) {\n    this.handlers[eventName].forEach(handler => handler.call(this, e));\n  }\n\n  /** Add an event handler for the event */\n  on(eventName: eventNames, handler: Function) {\n    this.handlers[eventName].push(handler);\n    return this;\n  }\n\n  /** Remove all event handlers for an event */\n  off(eventName: eventNames, handler?: Function) {\n    if (handler) {\n      this.handlers[eventName] = this.handlers[eventName].filter((handle) => {\n        return handle !== handler;\n      });\n    } else {\n      this.handlers[eventName] = [];\n    }\n    return this;\n  }\n\n  state = {\n    opened: false,\n    opening: false,\n    closed: true,\n    closing: false,\n  };\n\n  /** Open the menu */\n  open(e?: Event) {\n    this.emit('beforeopen', e);\n    if (this.disabled) {\n      return this;\n    }\n\n    if (this.state.opened) {\n      return this;\n    }\n\n    this.state.closed = false;\n    this.state.closing = false;\n    this.state.opening = true;\n    this.state.opened = false;\n\n    const offset = this.offset();\n    if (offset > 0) {\n      const duration = `${this.timing * (1 - offset / this.width)}ms`;\n      \n      this.menu.style.transitionDuration = duration;\n      this.panel.style.transitionDuration = duration;\n    }\n\n    Object.assign(this.menu.style, this.styles.open.menu);\n    Object.assign(this.panel.style, this.styles.open.panel);\n\n    const after = () => {\n      this.state.opening = false;\n      this.state.opened = true;\n\n      Object.assign(this.menu.style, this.styles.open.menu);\n      Object.assign(this.panel.style, this.styles.open.panel);\n      \n      this.emit('opened');\n    };\n    if (offset === this.width) {\n      after();\n    } else {\n      this.afterTransitionend(after);\n    }\n\n    return this;\n  }\n\n  /** Close the menu */\n  close(e?: Event) {\n    this.emit('beforeclose', e);\n    if (this.disabled) {\n      return this;\n    }\n\n    if (this.state.closed) {\n      this.state.closing = false;\n      return this;\n    }\n\n    this.state.closed = false;\n    this.state.closing = true;\n    this.state.opening = false;\n    this.state.opened = false;\n\n    const offset = this.offset();\n    if (offset > 0) {\n      const duration = `${this.timing * offset / this.width}ms`;\n      \n      this.menu.style.transitionDuration = duration;\n      this.panel.style.transitionDuration = duration;\n    }\n    \n    Object.assign(this.menu.style, this.styles.closed.menu);\n    Object.assign(this.panel.style, this.styles.closed.panel);\n\n    const after = () => {\n      this.state.closing = false;\n      this.state.closed = true;\n\n      Object.assign(this.menu.style, this.styles.closed.menu);\n      Object.assign(this.panel.style, this.styles.closed.panel);\n      \n      this.emit('closed');\n    };\n    if (offset === 0) {\n      after();\n    } else {\n      this.afterTransitionend(after);\n    }\n\n    return this;\n  }\n  \n  toggle(condition: boolean) {\n    if (condition === true) {\n      this.open();\n    } else if (condition === false) {\n      this.close();\n    } else {\n      this.toggle(this.state.closed || this.state.closing);\n    }\n    return this;\n  }\n\n  protected disabled = false;\n\n  /** Disable the menu functionality */\n  disable() {\n    this.disabled = true;\n    return this;\n  }\n\n  /** Enabled to menu functionality */\n  enable() {\n    this.disabled = false;\n    return this;\n  }\n\n  protected afterTransitionend(callback: Function) {}\n\n  /** get offset from the default (closed) position */\n  protected offset() {\n    return 0;\n  }\n}\n","import Pulling from './pulling';\n\nexport default class TouchPulling extends Pulling {\n  constructor(options: Options) {\n    super(options);\n\n    this.touch = options.touch !== false;\n    \n    if (this.touch) {\n      this.addTouchEvents();\n    }\n  }\n  protected touch: boolean;\n  \n  protected touched = false;\n  \n  /** set offset */\n  protected applyOffset(offset: number) {}\n\n  protected initTouchEvents() {\n    const { width, margin, side, slope, sensitivity, menu, panel } = this;\n\n    const sign = (side === 'left' ? 1 : -1);\n\n    let startClientX = 0;\n    let startClientY = 0;\n\n    let lastClientX = 0;\n\n    let startOffset = 0;\n\n    let prevTime = 0;\n    let lastTime = 0;\n\n    let prevClientX = 0;\n\n    let firstMove = false;\n\n    const onTouchstart = (e: TouchEvent) => {\n      if (this.ignoreSelector && (e.target as HTMLElement).matches(this.ignoreSelector)) {\n        return;\n      }\n\n      this.emit('touchstart', e);\n      if (this.disabled) {\n        return;\n      }\n\n      this.touched = false;\n      if (e.touches.length !== 1) {\n        return;\n      }\n      \n      const { clientX, clientY } = e.touches[0];\n      const offset = this.offset();\n      const region = margin + offset;\n      \n      if (side === 'left' && clientX <= region ||\n        side === 'right' && window.innerWidth - clientX <= region) {\n        this.touched = true;\n\n        startClientX = clientX;\n        startClientY = clientY;\n\n        lastClientX = clientX;\n        \n        startOffset = offset;\n\n        lastTime = Date.now();\n        \n        firstMove = true;\n      }\n    };\n\n    const onTouchmove = (e: TouchEvent) => {\n      this.emit('touchmove', e);\n\n      if (this.disabled || !this.touched) {\n        return;\n      }\n\n      const { clientX, clientY } = e.touches[0];\n      const diffX = (clientX - startClientX) * sign;\n      \n      if (Math.abs(diffX) < 10) {\n        return;\n      }\n      \n      if (firstMove) {\n        const diffY = clientY - startClientY;\n        const currentSlope = Math.abs(diffY / diffX);\n        if (currentSlope > slope) {\n          this.touched = false;\n          return;\n        }\n        \n        if (this.state.closed && diffX > 0) {\n          this.emit('beforeopen');\n        } else if (this.state.opened) {\n          this.emit('beforeopen');\n        }\n\n        menu.style.transition = null;\n        panel.style.transition = null;\n      }\n\n      if (this.state.opened && diffX > 0 || this.state.closed && diffX < 0) {\n        lastClientX = clientX;\n        lastTime = Date.now();\n\n        return;\n      }\n\n      this.state.opened = false;\n      this.state.closed = false;\n\n      const dx = (clientX - lastClientX) * sign;\n      \n      const opening = dx > 0;\n      this.state.opening = opening;\n      this.state.closing = !opening;\n\n      const offset = Math.min(Math.max(0, startOffset + diffX), width);\n      this.applyOffset(offset);\n\n      prevClientX = lastClientX;\n      lastClientX = clientX;\n\n      prevTime = lastTime;\n      lastTime = Date.now();\n      firstMove = false;\n    };\n\n    const onTouchend = (e: TouchEvent) => {\n      if (!this.touched) {\n        return;\n      }\n\n      this.touched = false;\n      if (firstMove) {\n        return;\n      }\n\n      this.emit('touchend', e);\n      \n      Object.assign(this.panel.style, this.styles.base.panel);\n      Object.assign(this.menu.style, this.styles.base.menu);\n\n      const offset = this.offset();\n      const { clientX } = e.changedTouches[0];\n      \n      let x1;\n      let t1;\n\n      if (clientX === lastClientX) {\n        x1 = prevClientX;\n        t1 = prevTime;\n      } else {\n        x1 = lastClientX;\n        t1 = lastTime;\n      }\n\n      const x2 = clientX;\n      const t2 = Date.now();\n\n      const speed = (x2 - x1) / (t2 - t1) * sign;\n\n      if (\n        offset > width / 2 && \n        speed > -sensitivity || \n        speed > sensitivity\n      ) {\n        this.open(e);\n      } else {\n        this.close(e);\n      }\n    };\n\n    return {\n      onTouchstart,\n      onTouchmove,\n      onTouchend,\n    };\n  }\n  protected touchEvents: {\n    onTouchstart(e: TouchEvent): void,\n    onTouchmove(e: TouchEvent): void,\n    onTouchend(e: TouchEvent): void,\n  };\n  protected addTouchEvents() {\n    if (!this.touchEvents) {\n      this.touchEvents = this.initTouchEvents();\n    }\n    document.documentElement.addEventListener('touchstart', this.touchEvents.onTouchstart, false);\n    document.documentElement.addEventListener('touchmove', this.touchEvents.onTouchmove, false);\n    document.documentElement.addEventListener('touchend', this.touchEvents.onTouchend, false);\n  }\n  protected removeTouchEvents() {\n    document.documentElement.removeEventListener('touchstart', this.touchEvents.onTouchstart);\n    document.documentElement.removeEventListener('touchmove', this.touchEvents.onTouchmove);\n    document.documentElement.removeEventListener('touchend', this.touchEvents.onTouchend);\n  }\n\n  protected ignores: string[] = [];\n  protected ignoreSelector: string = '';\n\n  /** Ignore touch events from elements matching a given selector */\n  ignore(selector: string) {\n    this.ignores.push(selector);\n    this.ignoreSelector = this.ignores.join(', ');\n    return this; \n  }\n  /** \n   * Remove selector from ignore list\n   * _Does not_ override `ignore`\n   */\n  unignore(selector: string) {\n    this.ignores = this.ignores.filter(s => s !== selector);\n    this.ignoreSelector = this.ignores.join(', ');\n    return this;\n  }\n\n  /** enable touch functionality */\n  enableTouch() {\n    if (!this.touch) {\n      this.addTouchEvents();\n      this.touch = true;\n    }\n    return this;\n  }\n\n  /** disable touch functionality */\n  disableTouch() {\n    if (this.touch) {\n      this.removeTouchEvents();\n      this.touch = false;\n    }\n    return this;\n  }\n}\n","import TouchPulling from './touch';\n\nexport default class Reveal extends TouchPulling {\n  constructor(options: Options) {\n    super(options);\n\n    this.styles.base.menu = {\n      overflowX: 'hidden',\n      overflowY: 'auto',\n\n      position: 'fixed',\n      [this.side]: '0',\n      top: '0',\n      bottom: '0',\n      width: `${this.width}px`,\n\n      zIndex: '-1',\n    };\n    this.styles.base.panel = {\n      transition: `transform ${this.timing}ms ${this.timingFunction}`,\n    };\n    this.styles.open.panel = {\n      transform: `translateX(${this.side === 'right' ? '-' : ''}${this.width}px)`,\n    };\n    this.styles.closed.panel = {\n      transform: `translateX(0)`,\n    };\n\n    Object.assign(this.menu.style, this.styles.base.menu, this.styles.closed.menu);\n    Object.assign(this.panel.style, this.styles.base.panel, this.styles.closed.panel);\n\n    this.initTransitionend();\n  }\n\n  protected offset() {\n    const panelPos = this.panel.getBoundingClientRect();\n    return Math.abs(panelPos.left);\n  }\n\n  protected applyOffset(offset: number) {\n    const sign = (this.side === 'left' ? 1 : -1);\n    this.panel.style.transform = `translateX(${offset * sign}px)`;\n  }\n\n  private onTransitionend: Function | null;\n\n  protected afterTransitionend(callback: Function) {\n    this.onTransitionend = callback;\n  }\n\n  private initTransitionend() {\n    this.panel.addEventListener('transitionend', () => {\n      if (this.onTransitionend) {\n        this.onTransitionend();\n      }\n\n      this.onTransitionend = null;\n    }, false);\n  }\n}\n\nTouchPulling.modes['reveal'] = Reveal;\n"],"names":["condition","message","TypeError","timingFunctions","options","_super","_this","touch","addTouchEvents","__extends","TouchPulling","offset","_a","width","margin","side","slope","sensitivity","menu","panel","sign","startClientX","startClientY","lastClientX","startOffset","prevTime","lastTime","prevClientX","firstMove","onTouchstart","e","ignoreSelector","target","matches","emit","disabled","touched","touches","length","clientX","clientY","region","window","innerWidth","Date","now","onTouchmove","diffX","Math","abs","diffY","currentSlope","state","closed","opened","style","transition","opening","closing","min","max","applyOffset","onTouchend","Object","assign","styles","base","x1","t1","speed","open","close","this","touchEvents","initTouchEvents","document","documentElement","addEventListener","removeEventListener","selector","ignores","push","join","filter","s","removeTouchEvents","beforeclose","beforeopen","touchstart","touchmove","touchend","values","Pulling","modes","some","x","mode","timing","timingFunction","assertArg","Element","includes","map","keys","eventName","handlers","forEach","handler","call","handle","duration","transitionDuration","after","afterTransitionend","toggle","callback","overflowX","overflowY","position","transform","initTransitionend","Reveal","panelPos","getBoundingClientRect","left","onTransitionend","prototype","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","entries","obj","key","first","_i","objects","objects_1","_c","_b","_d","val","Array","value","indexOf"],"mappings":"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"}